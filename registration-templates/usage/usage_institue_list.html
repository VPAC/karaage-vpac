{% extends "main.html" %}
{% block title %}Usage{% endblock %}

{% block content_title %}{% endblock %}

{% block usage_menu %}
<li><h3>Usage</h3></li>
{% endblock %}

{% load humanize %} 	
{% load filters %}
{% block content %}
<div id="content-main">
<h1>{{ machine_category }}</h1>
<h2>Usage {{ start|date }} - {{ end|date }}</h2>
<p>{% date_filter start end %}</p>
<p>No. CPU's: (average) {{ avg_cpus|floatformat:"1"  }}  Utilization: {{ utilization|floatformat:"2" }}%</p>
<p>Total time {{ total|timeformat }} ({{ total_jobs|intcomma }} jobs) of available {{ available_time|timeformat }} </p>

	<div class="module">	
   	<h2>Institutes</h2>
   	<table>
			<thead>
			<tr>
				<th>Institute</th>
				<th>CPU Time</th>
				<th>No. Jobs</th>
				<th>Actual</th>
				<th>Quota</th>
				<th>Difference</th>
			</tr>   	
   	</thead>
   	<tbody>
   	
   	{% for i in i_list|dictsortreversed:"usage" %}
			<tr class="{% cycle row1,row2 as rowcolours %}">
				<td><a href="institute/{{ i.institute.id }}/?{{ querystring }}">{{ i.institute.name }}</a> </td>
				<td class="right">{{ i.usage|timeformat }}</td>	
				<td class="right">{{ i.jobs|intcomma }}</td>	
				<td class="right">{{ i.percent|floatformat:"2" }}</td>
				<td class="right">{{ i.quota }}</td>
				<td class="right {{ i.class }}">{{ i.diff|floatformat:"2" }}</td>
			</tr> 
		{% endfor %}
		<tr class="{% cycle rowcolours %}">
				<td>Unused</td>
				<td class="right">{{ unused.usage|timeformat }}</td>	
				<td class="right">&nbsp;</td>	
				<td class="right">{{ unused.percent|floatformat:"2" }}</td>
				<td class="right">&nbsp;</td>
				<td class="right {{ unused.class }}">{{ unused.diff|floatformat:"2" }}</td>
			</tr> 
   	</tbody>
   	</table>
	</div>
	
</div>
{% endblock %}
